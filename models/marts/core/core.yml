version: 2

#########################################################
##                TABLA DIM_ADDRESSES                  ##
#########################################################

models:
  - name: dim_addresses
    description: "Tabla de dimensiones que contiene los datos de direcciones de envío y direcciones de los usuarios"
    columns:
      - name: address_id
        description: "Primary Key de la tabla addresses, generada como hash a partir del campo natural_address_id"

      - name: natural_address_id
        description: "Primary Key natural de la tabla addresses"

      - name: zipcode
        description: "Atributo - Desc. del código postal de la dirección"

      - name: address
        description: "Atributo - Desc. de la dirección"

      - name: city
        description: "Atributo - Desc. del nombre ciudad añadido a la tabla a partir de una seed"

      - name: country
        description: "Atributo - Desc. del nombre pais a donde pertenece la dirección"

      - name: state
        description: "Atributo - Desc. del nombre estado al que pertenece la dirección"

      - name: fivetran_synced
        description: "Atributo - Fecha de carga de la información"


#########################################################
##                   TABLA DIM_DATES                   ##
#########################################################

  - name: dim_dates
    description: "Tabla de dimensión que contiene los datos sobre los fechas desde 2020 hasta 2022"
    columns:
      - name: fecha_forecast
        description: "Atributo - Desc. de la fecha en formato date"

      - name: id_date
        description: "Primary Key de la tabla que describe el año, mes y día de la fecha"

      - name: anio
        description: "Atributo - Desc. del año"

      - name: mes
        description: "Atributo - Desc. numérica del mes"

      - name: desc_mes
        description: "Atributo - Desc. del nombre del mes"

      - name: dia_previo
        description: "Atributo - Cálculo del día previo"

      - name: anio_semana_dia
        description: "Atributo - Desc. del año, semana del año y el día de una fecha"

      - name: semana
        description: "Atributo - Desc. del número de la semana"


#########################################################
##                   TABLA DIM_MESES                   ##
#########################################################

  - name: dim_meses
    description: "Tabla de dimensión que contiene los datos sobre los meses desde 2020 hasta 2022"
    columns:
      - name: id_anio_mes
        description: "id que describe el mes y el año al que pertence la fecha"

      - name: desc_mes
        description: "Atributo - Desc. del nombre del mes"

      - name: mes
        description: "Atributo - Desc. numérica del mes"

      - name: mes_previo
        description: "Atributo - Cálculo del mes previo"

      - name: anio
        description: "Atributo - Desc. del año"


#########################################################
##                 TABLA DIM_PRODUCTS                  ##
#########################################################

  - name: dim_products
    description: "Tabla de dimensiones que contiene los datos sobre los productos"
    columns:
      - name: product_id
        description: "Primary Key de la tabla products, generada como hash a partir del campo natural_product_id"

      - name: natural_product_id
        description: "Primary Key natural de la tabla products"

      - name: price_usd
        description: "Atributo métrica - Precio del producto"

      - name: provider_price_usd
        description: "Atributo métrica - Precio supuesto como precio del proveedor"

      - name: name
        description: "Atributo - Desc. del nombre del producto"

      - name: inventory
        description: "Atributo métrica - Cantidad de producto en el almacén"

      - name: fivetran_synced
        description: "Atributo - Fecha de carga de la información"


#########################################################
##                  TABLA DIM_PROMOS                   ##
#########################################################

  - name: dim_promos
    description: "Tabla de dimensiones que contiene los datos sobre las promociones aplicadas a los productos"
    columns:
      - name: promo_id
        description: "Primary Key de la tabla promo, generada como hash a partir del campo desc_promo"

      - name: desc_promo
        description: "Atributo - Desc. del nombre de la promoción aplicada. Primary key natural"

      - name: status
        description: "Atributo - Desc. del estado de la promoción - ACTIVE/INACTIVE"

      - name: discount_usd
        description: "Atributo métrica - Número plano que se descuenta al coste del pedido"

      - name: fivetran_synced
        description: "Atributo - Fecha de carga de la información"


#########################################################
##                  TABLA DIM_USERS                    ##
#########################################################

models:
  - name: dim_users
    description: "Tabla de dimensión que contiene los datos sobre los usuarios/clientes"
    columns:
      - name: user_id
        description: "Primary Key de la tabla users, generada como hash a partir del campo natural_user_id"

      - name: natural_user_id
        description: "Primary Key natural de la tabla users"

      - name: address_id
        description: "Foreign Key del id de addresses"

      - name: id_date_created
        description: "id que describe el año, mes y día al que pertence la fecha de creación del usuario"

      - name: id_date_updated
        description: "id que describe el año, mes y día al que pertence la fecha de la última actualización del usuario"

      - name: first_name
        description: "Atributo - Desc. del nombre del usuario"

      - name: last_name
        description: "Atributo - Desc. del apellido del usuario"

      - name: phone_number
        description: "Atributo - Desc. del número de teléfono del usuario"

      - name: email
        description: "Atributo - Desc. del email del usuario"

      - name: gender
        description: ""

      - name: age
        description: ""

      - name: total_orders
        description: "Atributo métrica - Número total de ordenes que ha realizado el usuario"

      - name: created_at
        description: ""

      - name: created_date
        description: ""

      - name: updated_at
        description: ""

      - name: updated_date
        description: ""

      - name: fivetran_synced
        description: ""

#########################################################
##                 TABLA FACT_BUDGET                   ##
#########################################################

  - name: fact_budget
    description: ""
    columns:
      - name: id_anio_mes
        description: ""

      - name: budget_id
        description: ""

      - name: natural_budget_id
        description: ""

      - name: product_id
        description: ""

      - name: name
        description: ""

      - name: quantity
        description: ""

      - name: quantity_sold
        description: ""

      - name: price_usd
        description: ""

      - name: stimated_sales_usd
        description: ""

      - name: sales_usd
        description: ""

      - name: discount_usd
        description: ""

      - name: real_sales_usd
        description: ""

      - name: provider_cost_usd
        description: ""

      - name: profit
        description: ""

      - name: fivetran_synced
        description: ""

#########################################################
##                  TABLA FACT_ORDERS                  ##
#########################################################

  - name: fact_orders
    description: ""
    columns:
      - name: fact_order_id
        description: ""

      - name: order_id
        description: ""

      - name: natural_order_id
        description: ""

      - name: product_id
        description: ""

      - name: user_id
        description: ""

      - name: address_id
        description: ""

      - name: promo_id
        description: ""

      - name: shipping_id
        description: ""

      - name: id_date_created
        description: ""

      - name: id_date_delivered
        description: ""

      - name: status
        description: ""

      - name: shipping_service
        description: ""

      - name: order_cost_usd
        description: ""

      - name: shipping_cost_usd
        description: ""

      - name: created_at
        description: ""

      - name: created_date
        description: ""

      - name: delivered_at
        description: ""

      - name: delivered_date
        description: ""

      - name: estimated_delivery_at
        description: ""

      - name: fivetran_synced
        description: ""